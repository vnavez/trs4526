{% extends 'base.html.twig' %}

{% block body %}
    <h1>Torrents list</h1>
    <section id="heading-message"></section>
    <table class="table table-responsive table-condensed table-hover">
        <thead>
        <tr>
            <th>Id</th>
            <th>ID Distant</th>
            <th>ID Interne</th>
            <th>User</th>
            <th>Name</th>
            <th>Statut</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for torrent in torrents %}
            <tr>
                <td>{{ torrent.id }}</td>
                <td>{{ torrent.idT411 }}</td>
                <td>{{ torrent.idTransmission }}</td>
                <td>{% if torrent.user %}{{ torrent.user.username }}{% else %}{{ 'Aucun' }}{% endif %}</td>
                <td>{{ torrent.name }}</td>
                <td>
                    <span class="label{% if torrent.status %} {{ torrent.status.color }}{% endif %}">{% if torrent.status %}{{ torrent.status.name }}{% endif %}</span>
                </td>
                <td>
                    {% if not torrent.user %}
                        <a href="{{ path('torrent_change_state', { 'id': torrent.id }) }}" class="check-torrent">
                            <span class="glyphicon glyphicon-save{% if torrent.status and torrent.status.downloaded %} active{% endif %}"></span>
                        </a>
                    {% endif %}
                    <a href="{{ path('torrent_delete', { 'id': torrent.id }) }}" class="delete-torrent">
                        <span class="glyphicon glyphicon-remove"></span>
                    </a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <div id="delete-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">{{ 'Suppression du torrent' }}</h4>
                </div>
                <div class="modal-body">
                    {{ 'Etes-vous sûr de vouloir supprimer ce torrent? Tout fichier sera supprimé, ainsi que sa précense sur transmission.' }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'Annuler' }}</button>
                    <button type="button" class="btn btn-primary submit-delete-torrent">{{ 'Confirmer' }}</button>
                </div>
            </div>
        </div>
    </div>


{% endblock %}
